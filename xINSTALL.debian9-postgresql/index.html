



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="MISP Project - Install Guides">
      
      
        <link rel="canonical" href="https://www.misp-project.org/xINSTALL.debian9-postgresql/">
      
      
        <meta name="author" content="MISP Project">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.4">
    
    
      
        <title>Debian 9 \w postgresql - MISP Install Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../#installation-instructions" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://www.misp-project.org/" title="MISP Install Documentation" class="md-header-nav__button md-logo">
          
            <img src="../img/misp.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                MISP Install Documentation
              </span>
              <span class="md-header-nav__topic">
                Debian 9 \w postgresql
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/MISP/MISP" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      MISP/MISP
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://www.misp-project.org/" title="MISP Install Documentation" class="md-nav__button md-logo">
      
        <img src="../img/misp.png" width="48" height="48">
      
    </a>
    MISP Install Documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/MISP/MISP" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      MISP/MISP
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Install Guides
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Install Guides
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../INSTALL.ubuntu1804/" title="Ubuntu 18.04" class="md-nav__link">
      Ubuntu 18.04
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../INSTALL.ubuntu1804.with.webmin/" title="Ubuntu 18.04 \w webmin" class="md-nav__link">
      Ubuntu 18.04 \w webmin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../INSTALL.debian9/" title="Debian stable" class="md-nav__link">
      Debian stable
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../INSTALL.kali/" title="Kali Linux" class="md-nav__link">
      Kali Linux
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../INSTALL.rhel7/" title="Redhat Enterprise Linux 7" class="md-nav__link">
      Redhat Enterprise Linux 7
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      xInstall Guides
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        xInstall Guides
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../xINSTALL/" title="Warning" class="md-nav__link">
      Warning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../xINSTALL.centos6/" title="Centos 6" class="md-nav__link">
      Centos 6
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../xINSTALL.centos7/" title="Centos 7" class="md-nav__link">
      Centos 7
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../xINSTALL.debian_testing/" title="Debian testing" class="md-nav__link">
      Debian testing
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Debian 9 \w postgresql
      </label>
    
    <a href="./" title="Debian 9 \w postgresql" class="md-nav__link md-nav__link--active">
      Debian 9 \w postgresql
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#for-debian-8-jessie-server-postgresql" title="for Debian ---&gt;8&lt;--- "jessie" server + PostgreSQL" class="md-nav__link">
    for Debian ---&gt;8&lt;--- "jessie" server + PostgreSQL
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#please-follow-debian-8-install-instructions-installdebian8txt" title="please follow Debian 8 install instructions - INSTALL.debian8.txt" class="md-nav__link">
    please follow Debian 8 install instructions - INSTALL.debian8.txt
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../xINSTALL.OpenBSD/" title="OpenBSD 6.4" class="md-nav__link">
      OpenBSD 6.4
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Config Guides
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Config Guides
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../CONFIG.elasticsearch-logging/" title="Elastic Search Logging" class="md-nav__link">
      Elastic Search Logging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CONFIG.s3-attachments/" title="Amazon S3 attachments" class="md-nav__link">
      Amazon S3 attachments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CONFIG.SMIME/" title="S/MIME" class="md-nav__link">
      S/MIME
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../UPDATE/" title="Update MISP" class="md-nav__link">
      Update MISP
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../UPGRADE/" title="Upgrading MISP" class="md-nav__link">
      Upgrading MISP
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Old guides
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Old guides
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../old-2_3to2_4-UPGRADE/" title="2.3 to 2.4 upgrade" class="md-nav__link">
      2.3 to 2.4 upgrade
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Changelog/" title="MISP Release Notes" class="md-nav__link">
      MISP Release Notes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#for-debian-8-jessie-server-postgresql" title="for Debian ---&gt;8&lt;--- "jessie" server + PostgreSQL" class="md-nav__link">
    for Debian ---&gt;8&lt;--- "jessie" server + PostgreSQL
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#please-follow-debian-8-install-instructions-installdebian8txt" title="please follow Debian 8 install instructions - INSTALL.debian8.txt" class="md-nav__link">
    please follow Debian 8 install instructions - INSTALL.debian8.txt
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="installation-instructions">INSTALLATION INSTRUCTIONS<a class="headerlink" href="#installation-instructions" title="Permanent link">&para;</a></h1>
<h2 id="for-debian-8-jessie-server-postgresql">for Debian ---&gt;8&lt;--- "jessie" server + PostgreSQL<a class="headerlink" href="#for-debian-8-jessie-server-postgresql" title="Permanent link">&para;</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is the old Deian 8 jessie Guide, needs updating.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>PostgreSQL support in MISP is experimental.
We strongly discourage you from use on production systems.
Testing &amp; development: most recent MISP codebase on Debian 8 "jessie" (PHP 5.6 &amp; PostgreSQL 9.4).
There may be serious bugs!
We also don't support updates (e.g. 2.4.49 -&gt; 2.4.50) on PostgreSQL yet, so your installation may break.</p>
</div>
<div class="admonition notice">
<p class="admonition-title">Notice</p>
<p>If you want to help improving PostgreSQL-support,
Please make sure you have tried the newest commit from GitHub first.
Also, please activate debug mode.
After that, you may open an issue on Github and provide us with as much information on the issue as possible.</p>
</div>
<h2 id="please-follow-debian-8-install-instructions-installdebian8txt">please follow Debian 8 install instructions - INSTALL.debian8.txt<a class="headerlink" href="#please-follow-debian-8-install-instructions-installdebian8txt" title="Permanent link">&para;</a></h2>
<h1 id="when-it-comes-to-installing-mariadb-in-step-2-skip-that-part-instead">when it comes to installing mariadb in step 2, skip that part, instead:<a class="headerlink" href="#when-it-comes-to-installing-mariadb-in-step-2-skip-that-part-instead" title="Permanent link">&para;</a></h1>
<p>sudo apt-get install postgresql</p>
<h1 id="instead-of-installing-the-php5-mysql-package-in-step-2-install-php5-pgsql">instead of installing the php5-mysql package in step 2, install php5-pgsql<a class="headerlink" href="#instead-of-installing-the-php5-mysql-package-in-step-2-install-php5-pgsql" title="Permanent link">&para;</a></h1>
<p>sudo apt-get install php5-pgsql</p>
<h1 id="activate-the-module">activate the module<a class="headerlink" href="#activate-the-module" title="Permanent link">&para;</a></h1>
<p>sudo php5enmod pgsql</p>
<h1 id="restart-apache">restart apache<a class="headerlink" href="#restart-apache" title="Permanent link">&para;</a></h1>
<p>sudo service apache2 restart</p>
<h1 id="in-step-6-of-the-debian-install-you-skip-creating-a-mysql-user-instead">in step 6 of the Debian install, you skip creating a mysql user, instead:<a class="headerlink" href="#in-step-6-of-the-debian-install-you-skip-creating-a-mysql-user-instead" title="Permanent link">&para;</a></h1>
<h1 id="create-user">create user<a class="headerlink" href="#create-user" title="Permanent link">&para;</a></h1>
<p>sudo -u postgres createuser misp</p>
<h1 id="create-database">create database<a class="headerlink" href="#create-database" title="Permanent link">&para;</a></h1>
<p>sudo -u postgres createdb -O misp misp</p>
<h1 id="set-password">set password<a class="headerlink" href="#set-password" title="Permanent link">&para;</a></h1>
<p>sudo -u postgres psql -U postgres
postgres=# ALTER USER misp with password 'XXXXXXXXX';
postgres=# \q</p>
<h1 id="after-that-load-the-basic-database-structure">after that, load the basic database structure<a class="headerlink" href="#after-that-load-the-basic-database-structure" title="Permanent link">&para;</a></h1>
<p>psql -U misp -d misp -f /var/www/MISP/INSTALL/POSTGRESQL-structure.sql -h localhost -W</p>
<h1 id="attention-skip-this-step-if-you-want-to-migrate-from-mysqlmariadb">ATTENTION: skip this step if you want to migrate from MySQL/MariaDB!<a class="headerlink" href="#attention-skip-this-step-if-you-want-to-migrate-from-mysqlmariadb" title="Permanent link">&para;</a></h1>
<h1 id="and-load-initial-data">and load initial data<a class="headerlink" href="#and-load-initial-data" title="Permanent link">&para;</a></h1>
<p>psql -U misp -d misp -f /var/www/MISP/INSTALL/POSTGRESQL-data-initial.sql -h localhost -W</p>
<h1 id="in-step-8-of-the-debian-install-you-configure-postgres-instead-of-mysql">in step 8 of the Debian install, you configure Postgres instead of MySQL<a class="headerlink" href="#in-step-8-of-the-debian-install-you-configure-postgres-instead-of-mysql" title="Permanent link">&para;</a></h1>
<h1 id="the-necessary-lines-are-already-there-you-just-have-to-activate-them-instead-of-the-mysql-lines">the necessary lines are already there, you just have to activate them instead of the MySQL-lines<a class="headerlink" href="#the-necessary-lines-are-already-there-you-just-have-to-activate-them-instead-of-the-mysql-lines" title="Permanent link">&para;</a></h1>
<h1 id="file-varwwwmispappconfigdatabasephp">file: /var/www/MISP/app/Config/database.php<a class="headerlink" href="#file-varwwwmispappconfigdatabasephp" title="Permanent link">&para;</a></h1>
<h1 id="necessary-changes">necessary changes:<a class="headerlink" href="#necessary-changes" title="Permanent link">&para;</a></h1>
<h1 id="datasource-databasepostgres">'datasource' =&gt; 'Database/Postgres',<a class="headerlink" href="#datasource-databasepostgres" title="Permanent link">&para;</a></h1>
<h1 id="port-5432">'port' =&gt; 5432,<a class="headerlink" href="#port-5432" title="Permanent link">&para;</a></h1>
<h1 id="attention-skip-this-step-if-you-want-to-migrate-from-mysqlmariadb_1">ATTENTION: skip this step if you want to migrate from MySQL/MariaDB!<a class="headerlink" href="#attention-skip-this-step-if-you-want-to-migrate-from-mysqlmariadb_1" title="Permanent link">&para;</a></h1>
<h1 id="perhaps-you-accidently-installed-mysqlmariadb-too-but-you-can-clean-it-up-like-this">perhaps you accidently installed MySQL/MariaDB, too - but you can clean it up like this<a class="headerlink" href="#perhaps-you-accidently-installed-mysqlmariadb-too-but-you-can-clean-it-up-like-this" title="Permanent link">&para;</a></h1>
<p>sudo apt-get remove mysql-server mysql-client mariadb-client mariadb-server php5-mysql</p>
<h3 id="migration-from-mysqlmariadb">MIGRATION from MySQL/MariaDB<a class="headerlink" href="#migration-from-mysqlmariadb" title="Permanent link">&para;</a></h3>
<h1 id="migration-of-data-is-done-using-latest-pgloader-release-322-at-the-time-of-writing">migration of data is done using latest "pgloader" release (3.2.2 at the time of writing)<a class="headerlink" href="#migration-of-data-is-done-using-latest-pgloader-release-322-at-the-time-of-writing" title="Permanent link">&para;</a></h1>
<h1 id="add-official-postgres-repository-to-apt-sources">add official postgres repository to apt sources<a class="headerlink" href="#add-official-postgres-repository-to-apt-sources" title="Permanent link">&para;</a></h1>
<p>sudo sh -c 'echo "deb <a href="http://apt.postgresql.org/pub/repos/apt/">http://apt.postgresql.org/pub/repos/apt/</a> $(lsb_release -cs)-pgdg main" &gt; /etc/apt/sources.list.d/pgdg.list'</p>
<h1 id="make-sure-packages-from-official-postgres-repository-arent-used-by-default-only-when-explicitly-specifying-it">make sure packages from official postgres repository aren't used by default, only when explicitly specifying it<a class="headerlink" href="#make-sure-packages-from-official-postgres-repository-arent-used-by-default-only-when-explicitly-specifying-it" title="Permanent link">&para;</a></h1>
<p>sudo cat &lt;<EOF > /etc/apt/preferences.d/pgdg.pref
Package: *
Pin: release o=apt.postgresql.org
Pin-Priority: 200
EOF</p>
<h1 id="install-some-dependencies">install some dependencies<a class="headerlink" href="#install-some-dependencies" title="Permanent link">&para;</a></h1>
<p>sudo apt-get install wget ca-certificates</p>
<h1 id="add-repository-signing-key">add repository signing key<a class="headerlink" href="#add-repository-signing-key" title="Permanent link">&para;</a></h1>
<p>wget --quiet -O - <a href="https://www.postgresql.org/media/keys/ACCC4CF8.asc">https://www.postgresql.org/media/keys/ACCC4CF8.asc</a> | sudo apt-key add -</p>
<h1 id="update-cache">update cache<a class="headerlink" href="#update-cache" title="Permanent link">&para;</a></h1>
<p>sudo apt-get update</p>
<h1 id="install-pgloader">install pgloader<a class="headerlink" href="#install-pgloader" title="Permanent link">&para;</a></h1>
<p>sudo apt-get -t $(lsb_release -cs)-pgdg install pgloader</p>
<h1 id="migrate-data-replace-xxx-and-yyy-with-the-correct-passwords">migrate data (replace XXX and YYY with the correct passwords)<a class="headerlink" href="#migrate-data-replace-xxx-and-yyy-with-the-correct-passwords" title="Permanent link">&para;</a></h1>
<p>pgloader --type mysql --with "reset sequences" --with "data only" --set "maintenance_work_mem = '128MB'" --set "work_mem = '12MB'" --cast "type tinyint when (= precision 1) to smallint" mysql://misp:XXX@localhost/misp  postgresql://misp:YYY@localhost/misp</p>
<h1 id="afterwards-you-have-to-change-your-misp-database-configuration-see-above">afterwards, you have to change your MISP database configuration (see above)<a class="headerlink" href="#afterwards-you-have-to-change-your-misp-database-configuration-see-above" title="Permanent link">&para;</a></h1>
<h1 id="maybe-you-want-to-remove-mysql-see-command-above-in-the-end">maybe you want to remove mysql (see command above) in the end<a class="headerlink" href="#maybe-you-want-to-remove-mysql-see-command-above-in-the-end" title="Permanent link">&para;</a></h1>
<h1 id="if-you-only-want-to-stopdisable-it">if you only want to stop&amp;disable it:<a class="headerlink" href="#if-you-only-want-to-stopdisable-it" title="Permanent link">&para;</a></h1>
<p>systemctl stop mysql
systemctl disable mysql</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../xINSTALL.debian_testing/" title="Debian testing" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Debian testing
              </span>
            </div>
          </a>
        
        
          <a href="../xINSTALL.OpenBSD/" title="OpenBSD 6.4" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                OpenBSD 6.4
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 MISP Project
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://www.misp-project.org/" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://github.com/MISP" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://twitter.com/MISPProject" class="md-footer-social__link fa fa-twitter"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>